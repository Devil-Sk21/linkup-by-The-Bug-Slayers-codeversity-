{% extends "base.html" %}
{% block content %}
    <div class="header">
        <div>
            <div style="color:var(--text-dim); font-size:12px;">LOCATION</div>
            <div id="user-location" style="font-weight:bold; color:var(--accent);"><i class="fas fa-spinner fa-spin"></i> Locating...</div>
        </div>
        <a href="/profile"><i class="fas fa-user-circle" style="font-size:30px;"></i></a>
    </div>
    <div style="padding:24px;">
        <h1 style="margin:0; font-weight:300;">Hello, <b style="color:var(--text);">{{ user_name }}</b></h1>
    </div>
    <div style="display:flex; overflow-x:auto; gap:15px; padding:0 24px 20px;">
        {% for cat in categories %}
            {% if cat.name == 'Cleaning' %}
            <a href="/category/{{ cat.name }}" style="min-width:70px; display:flex; flex-direction:column; align-items:center; gap:8px;">
                <div style="width:60px; height:60px; background:var(--surface-light); border-radius:18px; display:flex; align-items:center; justify-content:center; font-size:24px; color:var(--text); border:1px solid var(--accent);">
                    <i class="fas {{ cat.icon }}"></i>
                </div>
                <span style="font-size:11px; color:var(--text-dim);">{{ cat.name }}</span>
            </a>
            {% else %}
            <div onclick="alert('ðŸš§ Module Under Construction\n\nThis vertical will go live in LinkUp Phase 2.')" style="min-width:70px; display:flex; flex-direction:column; align-items:center; gap:8px; opacity:0.5; filter:grayscale(100%);">
                <div style="width:60px; height:60px; background:var(--surface-light); border-radius:18px; display:flex; align-items:center; justify-content:center; font-size:24px; color:var(--text);">
                    <i class="fas {{ cat.icon }}"></i>
                </div>
                <span style="font-size:11px; color:var(--text-dim);">{{ cat.name }}</span>
            </div>
            {% endif %}
        {% endfor %}
    </div>
    <div class="section-header">Popular Services</div>
    <div style="padding:0 24px;">
        {% for s in services %}
        <a href="/service/{{ s.id }}" class="glow-card" style="display:flex; align-items:center; gap:15px;">
            <img src="{{ s.image }}" style="width:60px; height:60px; border-radius:10px; object-fit:cover;">
            <div style="flex:1;">
                <div style="font-weight:bold; font-size:16px;">{{ s.title }}</div>
                <div style="color:var(--text-dim); font-size:12px;">{{ s.category }}</div>
            </div>
            <div style="background:var(--text); color:black; padding:8px 12px; border-radius:20px; font-weight:bold; font-size:12px;">{{ s.price }}</div>
        </a>
        {% endfor %}
    </div>
    <script>
        if (navigator.geolocation) { navigator.geolocation.getCurrentPosition(showPosition, showError); }
        function showPosition(position) { document.getElementById("user-location").innerHTML = '<i class="fas fa-map-marker-alt"></i> GPS Active'; }
        function showError(error) { document.getElementById("user-location").innerHTML = "Location Denied"; }
    </script>
{% endblock %}